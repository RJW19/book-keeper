(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{1620:function(e,a,t){Promise.resolve().then(t.bind(t,70))},4903:function(e,a,t){"use strict";var n=t(7437);t(2265);var s=t(6463),r=t(7138),i=t(788),l=t.n(i),o=t(998),c=t(6648);function u(){let{data:e}=(0,o.useSession)(),a=(0,s.useRouter)(),t=async()=>{try{await (0,o.signOut)({redirect:!1}),a.push("/")}catch(e){console.error("Error during sign out:",e)}};return e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.default,{src:null==e?void 0:e.user.image,alt:"Profile Picture",width:35,height:35,className:"rounded"}),(0,n.jsx)("button",{onClick:t,className:l().authButton,children:"Sign Out"})]}):(0,n.jsx)("button",{onClick:()=>(0,o.signIn)(),className:l().authButton,children:"Sign In"})}a.default=()=>{let{data:e}=(0,o.useSession)();return(0,n.jsx)("nav",{className:l().navbar,children:(0,n.jsxs)("div",{className:l().navLinksWrapper,children:[(0,n.jsxs)("div",{className:l().navLinks,children:[(0,n.jsx)(r.default,{href:"/",className:l().navLink,children:"Home"}),(0,n.jsx)(r.default,{href:"/search",className:l().navLink,children:"Search"}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.default,{href:"/my-library",className:l().navLink,children:"My Library"}),(0,n.jsx)(r.default,{href:"/profile",className:l().navLink,children:"Profile"})]})]}),(0,n.jsx)("div",{className:l().authButtonWrapper,children:(0,n.jsx)(u,{})})]})})}},70:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var n=t(7437),s=t(2265),r=t(8472);t(5739);var i=e=>{let{query:a,setQuery:t,handleSearch:s}=e;return(0,n.jsx)("div",{className:"search-bar-container",children:(0,n.jsxs)("div",{className:"input-wrapper",children:[(0,n.jsx)("input",{type:"text",value:a,onChange:e=>t(e.target.value),placeholder:"Search for books...",onKeyDown:e=>{"Enter"===e.key&&s()}}),(0,n.jsx)("button",{onClick:s,className:"search-button",children:"Search"})]})})},l=t(7138);t(7746);let o="/images/defaultThumbnail.png";var c=e=>{let{results:a}=e,[t,r]=(0,s.useState)({}),i=e=>{r(a=>({...a,[e]:!0}))},c=e=>{e.target.src=o};return(0,n.jsx)("div",{className:"results-grid",children:a.map((e,a)=>{var s,r,u,d,h,v;let m=!!e.volumeInfo,f=m?null===(r=e.volumeInfo)||void 0===r?void 0:null===(s=r.imageLinks)||void 0===s?void 0:s.thumbnail:e.cover_i?"http://covers.openlibrary.org/b/id/".concat(e.cover_i,"-M.jpg"):o,p=m?null===(u=e.volumeInfo)||void 0===u?void 0:u.title:e.title,j=m?null===(h=e.volumeInfo)||void 0===h?void 0:null===(d=h.authors)||void 0===d?void 0:d[0]:null===(v=e.author_name)||void 0===v?void 0:v[0],g=t[e.id||e.key],x=e.id||e.key||a;return(0,n.jsx)(l.default,{href:"/book/".concat(x),children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("img",{width:128,height:192,src:g?f:"/images/defaultThumbnail.png",alt:"The cover art for ".concat(p," is currently unavailable"),onLoad:()=>i(e.id||e.key),onError:c}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h5",{children:p}),(0,n.jsx)("p",{children:j})]})]})},x)})})},u=t(4903),d=()=>{let[e,a]=(0,s.useState)(""),[t,l]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),[h,v]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!1),p=()=>{d(null),v(!0),f(!0),r.Z.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&key=").concat("AIzaSyBiHFShC_vTEsA0FEabESTE1VHzd7ah7fw","&maxResults=30")).then(e=>{v(!1),e.data.items?(l(e.data.items),console.log(e.data.items)):j()}).catch(e=>{v(!1),j()})},j=()=>{r.Z.get("https://openlibrary.org/search.json?q=".concat(e)).then(a=>{v(!1),a.data.docs&&a.data.docs.length>0?(l(a.data.docs),console.log(a.data.docs)):g(e)}).catch(a=>{v(!1),g(e)})},g=e=>{d(null),v(!0),f(!0),r.Z.get("http://localhost:3001/api/volumes/brief/isbn/".concat(e)).then(e=>{if(v(!1),e.data.records&&Object.keys(e.data.records).length>0){let a=Object.values(e.data.records).map(e=>e.data);l(a),console.log(a)}else l([]),d("No results found.")}).catch(e=>{v(!1),l([]),d("An error occurred while fetching data.")})};return(0,n.jsxs)("div",{children:[(0,n.jsx)(u.default,{}),(0,n.jsx)(i,{query:e,setQuery:a,handleSearch:()=>{/^\d{13}$/.test(e)?g(e):p()}}),h&&(0,n.jsx)("div",{}),!h&&o&&(0,n.jsx)("div",{children:o}),!h&&m&&0===t.length&&(0,n.jsx)("div",{children:"No results found"}),(0,n.jsx)(c,{results:t})]})}},5739:function(){},7746:function(){},788:function(e){e.exports={navbar:"NavBar_navbar__K0Kuh",navLinksWrapper:"NavBar_navLinksWrapper__6mZWV",navLinks:"NavBar_navLinks__p8qjk",navLink:"NavBar_navLink__beKA5",active:"NavBar_active__aoNJK",authButtonWrapper:"NavBar_authButtonWrapper__ZzvEJ",authButton:"NavBar_authButton__FASqc"}}},function(e){e.O(0,[736,998,288,472,971,23,744],function(){return e(e.s=1620)}),_N_E=e.O()}]);